{"version":3,"sources":["WebAPI.js","pages/HomePage/HomePage.js","contexts.js","pages/LoginPage/LoginPage.js","pages/SinglePage/SinglePage.js","pages/ListPage/ListPage.js","pages/PostPage/PostPage.js","pages/AboutPage/AboutPage.js","pages/RegisterPage/RegisterPage.js","components/Header/Header.js","components/App/App.js","index.js"],"names":["BASE_URL","getPosts","fetch","then","res","json","getMe","token","localStorage","getItem","headers","getListPage","page","Root","styled","div","PostContainer","PostTitle","Link","PostDate","Post","post","to","id","title","Date","createdAt","toLocaleString","HomePage","useState","posts","setPosts","useEffect","map","path","AuthContext","createContext","ErrorMessage","LoginPage","setUser","useContext","username","setUsername","password","setPassword","errorMessage","setErrorMessage","history","useHistory","location","useLocation","onSubmit","e","preventDefault","method","body","JSON","stringify","login","data","ok","message","console","log","setItem","response","toString","pathname","push","value","onChange","target","type","SinglePage","setPost","useParams","getSinglePage","PostHead","PostBody","ListPage","pageNum","setPageNum","Array","Math","ceil","length","fill","handleChangePage","useCallback","Paginate","Page","handlePage","nowPage","innerText","onClick","FormContainer","PostPage","setTitle","setBody","newPost","AboutPage","Form","form","Loading","RegisterPage","nickname","setNickname","isLoadingPostMessage","setIsLoadingPostMessage","alert","registerUser","catch","err","HeaderContainer","Brand","NavbarList","Nav","props","$active","LeftContainer","Header","user","App","useLayoutEffect","Provider","exact","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a17a5e99.chunk.js","sourcesContent":["const BASE_URL = 'https://student-json-api.lidemy.me'\n\nexport const getPosts = () => {\n    return fetch(`${BASE_URL}/posts?_sort=createdAt&_order=desc`)\n      .then(res => res.json())\n}\n\nexport const login = (username, password) => {\n  return (\n    fetch(`${BASE_URL}/login`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    })\n    .then(res => res.json())\n  )\n}\n\nexport const getMe = () => {\n  const token = localStorage.getItem('token');\n  return (\n    fetch(`${BASE_URL}/me`, {\n      headers: {\n        'authorization': `Bearer ${token}`\n      }\n    })\n    .then(res => res.json())\n  )\n}\n\nexport const getSinglePage = (id) => {\n  return fetch(`${BASE_URL}/posts/${id}`)\n  .then(res => res.json())\n}\n\n\nexport const getListPage = (page) => {\n  return fetch(`${BASE_URL}/posts?_sort=createdAt&_order=desc&_page=${page}&_limit=5`)\n  .then(res => res.json())\n}\n\nexport const newPost = (title, body) => { \n  const token = localStorage.getItem('token');\n  return fetch(`${BASE_URL}/posts`, {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n      'authorization': `Bearer ${token}`,\n    },\n    body: JSON.stringify({\n      title,\n      body,\n    })\n  })\n  .then(res => res.json())\n}\n\nexport const registerUser = (nickname, username, password) => {\n\n  return fetch(`${BASE_URL}/register`, {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      nickname,\n      username,\n      password\n    })\n  })\n  .then(res => res.json())\n  \n}","import PropTypes from 'prop-types';\n\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link,\n} from \"react-router-dom\";\n\nimport { getPosts } from '../../WebAPI';\n\n\nconst Root = styled.div`\n  width: 80%;\n  margin: auto;\n  margin-top: 64px;\n`\n\nconst PostContainer = styled.div`\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n`\n\nconst PostTitle = styled(Link)`\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n`\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.8)\n`\n\nfunction Post({post}) {\n\n  return (\n      <PostContainer>\n\n          <PostTitle to={`/posts/${post.id}`}>{post.title}</PostTitle>\n\n          \n        <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\n      </PostContainer>\n  )\n}\n\nPost.propTypes = {\n  post: PropTypes.object\n}\n\n\nfunction HomePage() {\n\n  const [posts, setPosts] = useState([])\n\n  useEffect(() => {\n    getPosts().then(posts => setPosts(posts))\n  }, [])\n  \n  \n\n  return (  \n\n    <Root>\n      {posts.map(post => \n        <Post key={post.id} post={post} />\n      )}\n        <Router>\n          <Switch>\n          <Route path=\"/post/:id\">\n            123\n          </Route>\n          </Switch>\n\n        </Router>\n    </Root>\n    \n  );\n}\nexport default HomePage;","import { createContext } from 'react';\n\nexport const AuthContext = createContext(null);","import { useState, useContext } from 'react';\nimport styled from 'styled-components';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { login, getMe } from '../../WebAPI';\nimport { AuthContext } from '../../contexts';\n\nconst Root = styled.div`\n  margin-top: 64px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n`\n\nconst ErrorMessage = styled.div`\n  color: red;\n`\n\nfunction LoginPage() {\n  const { setUser } = useContext(AuthContext)\n  const [username, setUsername] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const history = useHistory();\n  const location = useLocation();\n\n  const handleSubmit = (e) => {\n    setErrorMessage(null)\n    e.preventDefault()\n    login(username, password).then(data => {\n      if(data.ok === 0) {\n        setErrorMessage(data.message)\n        console.log('logining error')\n        return \n      }\n      const token = data.token\n      localStorage.setItem('token', token)\n\n      getMe().then(response => {\n        if(response.ok !== 1) {\n          console.log('response not ok', response.message)\n          localStorage.setItem('token', null)\n          console.log('token error')\n          return setErrorMessage(response.toString())\n        }\n        \n        setUser(response.data)\n        if(location.pathname !== '/') {\n          history.push('/');\n        }\n      })\n      \n    })\n  }\n  return (  \n    <Root>\n      <form onSubmit={handleSubmit}>\n        <div>\n          username: <input value={username} onChange={ e => setUsername(e.target.value)}/>\n        </div>\n        <div>\n          password: <input type='password' value={password} onChange={ e => setPassword(e.target.value)}/>\n        </div>\n        <button> 登入 </button>\n        {errorMessage && <ErrorMessage> {errorMessage} </ErrorMessage>}\n      </form>\n    </Root>\n  );\n}\nexport default LoginPage;\n\n// 登入後導ㄌㄌ回首頁","import { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useParams } from 'react-router-dom';\nimport { getSinglePage } from '../../WebAPI'\n\n\n\nfunction SinglePage() {\n  const [post, setPost] = useState({})\n\n  const { id } = useParams();\n  console.log(id)\n  useEffect(() => {\n    const post = getSinglePage(id)\n    post.then( post => {\n      console.log(post)\n      setPost(post)\n    })\n  }, [])\n\n\n\nconst Root = styled.div`\n  margin-top: 80px;\n`\nconst PostContainer = styled.div`\n  \n  margin: auto;\n  width: 60%;\n`\n\nconst PostHead = styled.div`\n  padding: 10px 5px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  \n`\n\nconst PostTitle = styled.div`\n  font-size: 24px;\n`\n\nconst PostDate = styled.div``\n\nconst PostBody = styled.div` \n  margin-top: 20px;\n  font-size: 16px;\n  padding: 0px 20px;\n`\n\n  return (  \n    <Root>\n      <PostContainer>\n        <PostHead>\n          <PostTitle >{post.title}</PostTitle>\n          <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\n        </PostHead>\n        <PostBody>\n          {post.body}\n        </PostBody>\n      </PostContainer>\n    </Root>\n  );\n}\nexport default SinglePage;\n","import { useState, useEffect, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport { getPosts, getListPage } from '../../WebAPI'\n\n\n/*\n1. 拿全部 post 數量\n2. 計算頁數\n3. 設定每個頁數啟動 limit getPost\n4. render\n*/\n\nfunction ListPage() {\n\n    const [posts, setPosts] = useState([])\n    const [pageNum, setPageNum] = useState([])\n\n    useEffect(() => {\n      getPosts().then(posts => {\n        setPageNum(Array(Math.ceil(posts.length/5)).fill('1'))  \n      })\n      getListPage(1).then(posts => {\n        setPosts(posts)\n      })\n    }, [])\n\n    const handleChangePage = useCallback((page) => {\n      getListPage(page).then(res => {\n        console.log(res)\n        setPosts(res)\n      }) \n    })\n\n\n    const Root = styled.div `\n    margin-top: 80px;\n  `\n    const PostContainer = styled.div `\n    border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n    padding: 16px;\n    display: flex;\n    align-items: flex-end;\n    justify-content: space-between;\n  `\n\n    const PostTitle = styled(Link)\n    `\n    font-size: 24px;\n    color: #333;\n    text-decoration: none;\n  `\n\n    const PostDate = styled.div `\n    color: rgba(0, 0, 0, 0.8)\n  `\n\n    const Paginate = styled.div `\n    margin-top: 20px;\n    display: flex;\n    justify-content: center;\n  `\n\n    const Page = styled.div `\n    padding: 5px 10px;\n    cursor: pointer;\n   \n  `\n  \n    const handlePage = (e) => {\n        const nowPage = e.target.innerText\n        handleChangePage(nowPage)\n    }\n\n\n    return ( \n      <Root> {\n            posts.map(post => ( \n            <PostContainer >\n                <PostTitle to = { `/posts/${post.id}` } > { post.title } </PostTitle> \n                <PostDate > { new Date(post.createdAt).toLocaleString() } </PostDate> \n            </PostContainer>\n            ))\n        } \n        <Paginate > {\n            pageNum.map((page, id) => { \n              return (\n              <Page onClick = { handlePage } >\n                  {id + 1}\n              </Page>\n            )})\n        } \n        </Paginate>\n\n      </Root>\n    );\n}\nexport default ListPage;","import { useState } from 'react';\nimport styled from 'styled-components';\nimport { useHistory } from 'react-router-dom';\nimport { newPost } from '../../WebAPI'\n\nconst Root = styled.div`\n  margin-top: 64px;\n`\nconst FormContainer = styled.div`\n  width: 70%;\n  margin: auto;\n  border: 1px solid rgba(0, 0, 0, 0.3);\n  border-radius: 7px;\n  text-align: center;\n  padding: 50px 20px;\n`\n\n\nfunction PostPage() {\n  const [title, setTitle] = useState(\"\")\n  const [body, setBody] = useState(\"\")\n  \n  const history = useHistory()\n\n  const handleSubmit = e => {\n    e.preventDefault()\n    newPost(title, body).then(res => {\n      if(res.ok !== 0) {\n        console.log(res)\n        history.push('/')\n      }\n    })\n  }\n\n  return (  \n    <Root>\n      <FormContainer>\n        <form onSubmit={handleSubmit}>\n          <div>\n            Title: <input value={title} onChange={ e => setTitle(e.target.value)}/>\n          </div>\n          <div>\n            body: <input value={body} onChange={ e => setBody(e.target.value)}/>\n          </div>\n          <button type='submit'> 發布文章 </button>\n          \n        </form>    \n      </FormContainer>\n    </Root>\n  )\n}\nexport default PostPage;\n\n// 文章新增完後，回到首頁並已有該文章","import React from 'react';\nimport styled from 'styled-components';\n\n\n\nconst Root = styled.div`\n  width: 80%;\n  margin: auto;\n  margin-top: 64px;\n`\n\n\n\nfunction AboutPage() {\n \n  \n\n  return (  \n\n    <Root>\n      隨意顯示一些關於這個部落格的話\n      隨意顯示一些關於這個部落格的話\n      隨意顯示一些關於這個部落格的話\n      隨意顯示一些關於這個部落格的話\n      隨意顯示一些關於這個部落格的話\n    </Root>\n    \n  );\n}\nexport default AboutPage;","import { useState, useContext } from 'react';\nimport styled from 'styled-components';\nimport { useHistory } from 'react-router-dom';\nimport { registerUser } from '../../WebAPI';\nimport { AuthContext } from '../../contexts';\n\n\nconst Root = styled.div`\n  margin-top: 64px;\n\n`\n\nconst Form = styled.form`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n`\n\nconst ErrorMessage = styled.div`\n  color: red;\n`\nconst Loading = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  z-index: 10;\n  font-size: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nfunction RegisterPage() {\n  const { setUser } = useContext(AuthContext)\n  const [nickname, setNickname] = useState(\"\")\n  const [username, setUsername] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [isLoadingPostMessage, setIsLoadingPostMessage] = useState(false);\n\n  const history = useHistory();\n\n  const handleSubmit = (e) => {\n    \n    e.preventDefault()\n    setErrorMessage(null)\n    if(isLoadingPostMessage) {\n      return\n    }\n    setIsLoadingPostMessage(true)\n\n    if(!nickname || !username || !password) {\n      alert('請填寫完整！')\n      setIsLoadingPostMessage(false)\n      return\n    }\n\n\n    registerUser(nickname, username, password).then(res => {\n      if(!res.ok) {\n        setErrorMessage(res.message)\n        setIsLoadingPostMessage(false)\n        return\n      }\n\n      setUser({nickname, username, password})\n      localStorage.setItem('token', res.token)\n      setIsLoadingPostMessage(false)\n      alert('註冊成功')\n      history.push('/')\n    }).catch(err => {\n      setErrorMessage(err)\n      return\n    })\n    setNickname(\"\")\n    setUsername(\"\")\n    setPassword(\"\") \n  }\n  return (  \n    \n    <Root>\n      {isLoadingPostMessage && <Loading> Loading...... </Loading>}  \n      <Form onSubmit={handleSubmit}>\n        <div>\n          nickname: <input value={nickname} onChange={ e => setNickname(e.target.value)}/>\n        </div>\n        <div>\n          username: <input value={username} onChange={ e => setUsername(e.target.value)}/>\n        </div>\n        <div>\n          password: <input type='password' value={password} onChange={ e => setPassword(e.target.value)}/>\n        </div>\n        <button> 提交註冊 </button>\n        {errorMessage && <ErrorMessage> {errorMessage} </ErrorMessage>}\n      </Form>\n    </Root>\n  );\n}\nexport default RegisterPage;\n\n// 登入後導ㄌㄌ回首頁","import styled from 'styled-components';\nimport { Link, useLocation, useHistory} from \"react-router-dom\";\nimport { useContext } from 'react';\nimport { AuthContext } from '../../contexts';\n\nconst HeaderContainer = styled.div`\n  height: 64px;\n  position: fixed;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 0px 32px;\n`\nconst Brand = styled.div`\n  display: flex;\n  font-size: 24px;\n  font-weight: bold;  \n  margin: auto;\n\n  &:hover {\n    color: yellow;\n  }\n`\n\n\nconst NavbarList = styled.div`\n  display: flex;\n  align-item: center;\n`\n\nconst Nav = styled(Link)`\n  display: flex;\n  justify-center: center;\n  align-items: center;\n  height: 64px;\n  padding: 0px 15px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n\n  ${props => props.$active && `\n    background: rgba(0, 0, 0, 0.1)\n  `}\n`;\n\nconst LeftContainer = styled.div`\n  display: flex;\n\n  ${NavbarList}{\n    margin-left: 10px;  \n  }\n`\n\n\n  \nfunction Header() {\n  const { user, setUser } = useContext(AuthContext)\n  const location = useLocation()\n  const history = useHistory()\n\n  const handleLogout = () => {\n    localStorage.setItem('token', null)\n    history.push('/')\n    setUser(null)\n  }\n\n  return(\n    <HeaderContainer >\n        <LeftContainer>\n          <Brand>這是我第一個部落格</Brand >\n          <NavbarList>\n            <Nav to='/' $active={location.pathname === '/'}>首頁</Nav>\n            <Nav to='/about' $active={location.pathname === '/about'}>關於</Nav>\n            <Nav to='list-post' $active={location.pathname === 'list-post'}> 文章列表 </Nav>\n            { user && <Nav to='/new-post' $active={location.pathname === '/new-post'}>發布文章</Nav>}\n            \n          </NavbarList>\n        </LeftContainer>\n        <NavbarList>\n          {!user && <Nav to='/login' $active={location.pathname === '/login'}>登入</Nav>}\n          {user && <Nav onClick={handleLogout}> 登出 </Nav>}\n          <Nav to='/register' $active={location.pathname === '/register'}>註冊</Nav>\n        </NavbarList>\n    </HeaderContainer>\n)}\n\nexport default Header;","import './App.css';\nimport HomePage from '../../pages/HomePage'\nimport LoginPage from '../../pages/LoginPage'\nimport SinglePage from '../../pages/SinglePage'\nimport ListPage from '../../pages/ListPage'\nimport PostPage from '../../pages/PostPage'\nimport AboutPage from '../../pages/AboutPage'\nimport RegisterPage from '../../pages/RegisterPage'\nimport Header from '../Header'\nimport { useState, useLayoutEffect } from 'react';\nimport styled from 'styled-components';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport { AuthContext } from '../../contexts'\nimport { getMe } from '../../WebAPI';\n\nconst Root = styled.div``\n\nfunction App() {\n  const [user, setUser] = useState(null)\n\n  useLayoutEffect(() => {\n    getMe().then(res => {\n      if(res.ok) {\n        setUser(res.data)\n      }\n    })\n  }, [])\n  \n  return(\n    <AuthContext.Provider value={{ user, setUser}}>\n      <Root>\n        <Router>\n          <Header />\n          <Switch>\n            <Route exact path=\"/\">\n              <HomePage /> \n            </Route>\n            <Route path=\"/about\">\n              <AboutPage />\n            </Route>\n            <Route path=\"/list-post\">\n              <ListPage />\n            </Route>\n            <Route path=\"/login\">\n              <LoginPage />\n            </Route>\n            <Route path=\"/posts/:id\">\n              <SinglePage />\n            </Route>\n            <Route path=\"/new-post\">\n              <PostPage />\n            </Route>\n            <Route path=\"/register\">\n              <RegisterPage />\n            </Route>\n          </Switch>\n        </Router>\n      </Root>\n    </AuthContext.Provider>\n  )}\n\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\n// import MessageBoard from './components/MessageBoard';\n\nReactDOM.render(<App />, document.getElementById('root'));\n// ReactDOM.render(<MessageBoard />, document.getElementById('root'));\n\n\n\n"],"sourceRoot":""}